(this["webpackJsonpweather-react"]=this["webpackJsonpweather-react"]||[]).push([[6],{126:function(e,t,a){"use strict";var r=a(1),n=a.n(r),s=a(14);t.a=function(e){var t=Object(r.useContext)(s.a).theme;return n.a.createElement("div",{className:"w-full ml-auto mr-auto h-auto bg-".concat(t," border border-red-400 text-red-700 mt-5 px-4 py-2 rounded relative"),role:"alert"},n.a.createElement("span",{className:"w-5/6 block break-words"},e.errorMessage),e.showCloseBtn&&n.a.createElement("span",{className:"absolute top-0 bottom-0 right-0 ml-3 mr-1 py-3",onClick:e.closeError},n.a.createElement("svg",{className:"fill-current h-6 w-6 text-red-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},n.a.createElement("title",null,"Close"),n.a.createElement("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"}))))}},127:function(e,t,a){"use strict";a.d(t,"a",(function(){return x})),a.d(t,"b",(function(){return E}));var r=a(148),n=a(24),s=a.n(n),c=a(31),o=a(134),i=a(128),l=a(129),u=a(133),d=a(132),h=a(1),p=a.n(h),m=a(55),f=a.n(m),b=a(10),v=a(123),y=a(124),g=a(140),w=a(9),x=p.a.createContext(null),E=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=t.call.apply(t,[this].concat(l))).updateState=function(t){e.setState(Object(o.a)({},t))},e.updateFavorites=function(t){e.setState(Object(o.a)({},t))},e.state={address:{cityName:"",cityId:""},urbanArea:{name:"",slug:"",photos:[]},latlong:"",favorites:[],updateState:e.updateState,updateFavorites:e.updateFavorites},e.fetchAddressInfo=Object(c.a)(s.a.mark((function t(){var a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="",r={name:"",slug:"",photos:[]},t.next=4,f.a.get("https://ipapi.co/json").then(function(){var t=Object(c.a)(s.a.mark((function t(n){var o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n.data,Object(v.a)(o)||Object(y.a)(o)){t.next=6;break}return i="".concat(o.city,", ").concat(o.region,", ").concat(o.country_name),t.next=5,f.a.get("https://api.teleport.org/api/cities/?search=".concat(i)).then(function(){var e=Object(c.a)(s.a.mark((function e(t){var n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data,Object(v.a)(n)||Object(y.a)(n)||!(n.count>0)){e.next=6;break}return c=n._embedded["city:search-results"].map((function(e){return{cityId:e._links["city:item"].href.split("/")[5]}})),a=c[0].cityId,e.next=6,Object(g.a)(a).then((function(e){r=e.urbanArea})).catch((function(e){return w.a(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return w.a(e)}));case 5:e.updateState({address:{cityName:i,cityId:a},latlong:"".concat(o.latitude,",").concat(o.longitude),urbanArea:r});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return w.a(e)}));case 4:case"end":return t.stop()}}),t)}))),e.getFavorites=function(){localStorage.getItem("favorites")&&e.setState({favorites:Object(r.a)(JSON.parse(localStorage.getItem("favorites")))})},e}return Object(l.a)(a,[{key:"getAddressInfo",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,localStorage.getItem("urban-areas")){e.next=6;break}return e.next=4,f.a.get("https://gist.githubusercontent.com/iamsainikhil/4959bbe458ebf0c4bcbf7e24b4983c89/raw/170221bcd3d9732fec97210b9a67cd445e437481/urban_areas.json").then((function(e){return e.data}));case 4:t=e.sent,localStorage.setItem("urban-areas",JSON.stringify(t));case 6:this.fetchAddressInfo(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),w.a(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getAddressInfo(),this.getFavorites()}},{key:"render",value:function(){return p.a.createElement(x.Provider,{value:this.state},this.props.children)}}]),a}(h.Component);x.propTypes={address:b.PropTypes.objectOf(b.PropTypes.string),latlong:b.PropTypes.string}},130:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return o}));var r=a(53),n=a(1),s=a.n(n),c=s.a.createContext({weatherUnit:"C"}),o=function(e){var t=e.children,a=Object(n.useState)("C"),o=Object(r.a)(a,2),i=o[0],l=o[1];return Object(n.useEffect)((function(){localStorage.getItem("unit")?l(JSON.parse(localStorage.getItem("unit"))):localStorage.setItem("unit",JSON.stringify("C"))}),[]),s.a.createElement(c.Provider,{value:{weatherUnit:i,updateWeatherUnit:function(e){l(e),localStorage.setItem("unit",JSON.stringify(e))}}},t)}},136:function(e,t,a){"use strict";var r=a(128),n=a(129),s=a(133),c=a(132),o=a(1),i=a.n(o),l=a(126),u=a(9),d=a(125),h=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={hasError:!1,eventId:null},e}return Object(n.a)(a,[{key:"componentDidCatch",value:function(e,t){var a=this;u.c((function(r){r.setExtras(t);var n=u.a(e);a.setState({eventId:n})}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,this.state.hasError?i.a.createElement("div",{className:"flex"},i.a.createElement("div",{className:"w-1/6"}),i.a.createElement("div",{className:"flex-col w-2/3 justify-center text-center"},i.a.createElement(l.a,{errorMessage:"Something went wrong. Reload the page!"}),i.a.createElement("button",{className:"font-semibold py-3 px-6 rounded-full capitalize text-sun",onClick:function(){return d.b({eventId:e.state.eventId})}},"Report feedback"))):this.props.children)}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),a}(o.Component);t.a=h},140:function(e,t,a){"use strict";var r=a(24),n=a.n(r),s=a(31),c=a(55),o=a.n(c),i=a(135),l=a.n(i),u=a(123),d=a(124),h=a(9);l()(o.a,{retryDelay:l.a.exponentialDelay});var p=function(){var e=Object(s.a)(n.a.mark((function e(t){var a,r,c,i,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="",r="",c="",i="",l=[],e.next=7,o.a.get("https://api.teleport.org/api/cities/".concat(t)).then(function(){var e=Object(s.a)(n.a.mark((function e(t){var s,h,p,m,f,b,v;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.data,Object(u.a)(s)||Object(d.a)(s)||(h=s.location.latlon,p=h.latitude,m=h.longitude,a=p,r=m,s._links["city:urban_area"]&&(c=s._links["city:urban_area"].name)),!localStorage.getItem("urban-areas")||void 0===c){e.next=11;break}if(f=JSON.parse(localStorage.getItem("urban-areas")),!Object.keys(f).includes(c)){e.next=11;break}return i=f[c],e.next=8,o.a.get("https://api.teleport.org/api/urban_areas/slug:".concat(i,"/images"));case 8:b=e.sent,v=b.data,l=Object(u.a)(v)||Object(d.a)(v)?[]:v.photos;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return h.a(e)}));case 7:return e.abrupt("return",{latlong:"".concat(a,",").concat(r),urbanArea:{name:c,slug:i,photos:l}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a=p},161:function(e,t,a){},175:function(e,t,a){"use strict";a.r(t),a.d(t,"HomeContainer",(function(){return P}));var r=a(128),n=a(129),s=a(133),c=a(132),o=a(1),i=a.n(o),l=a(24),u=a.n(l),d=a(31),h=a(55),p=a.n(h),m=a(135),f=a.n(m),b=a(152),v=a.n(b),y=(a(161),a(14)),g=function(e){var t=Object(o.useContext)(y.a),a=t.theme,r=t.colorTheme;return i.a.createElement("p",{className:"px-5 py-1 cursor-pointer item text-".concat(r," hover:text-").concat(a," hover:bg-").concat(r),onClick:e.addressSelected},e.address.cityName)},w=a(52),x=a(126),E=a(127),j=a(141),O=a(162),k=function(e){var t=e.type,a=e.color,r={search:i.a.createElement(j.b,null),up:i.a.createElement(O.b,null),down:i.a.createElement(O.a,null)};return i.a.createElement("p",{className:"opacity-75 text-2xl fill-".concat(a)},r[t])},S=function(e){var t=Object(o.useContext)(y.a),a=t.theme,r=t.colorTheme;return i.a.createElement("div",{className:"h-12 mx-5 mt-5"},i.a.createElement("div",{className:"relative"},i.a.createElement("div",{className:"absolute top-0 left-0 ml-5 mt-3"},i.a.createElement(k,{type:"search",color:r})),i.a.createElement("input",{style:{backgroundColor:"".concat("dark"===a?"#3a3a3a":"#e2e8f0"),letterSpacing:"0.05em"},className:"data-hj-whitelist block appearance-none w-full border-none rounded-full shadow py-3 pl-12 pr-6 mb-3 leading-tight focus:outline-none focus:bg-gray-200 truncate text-".concat(r),id:"grid-first-name",type:"text",placeholder:"Type city name to find weather forecast",onChange:e.citySearch,value:e.city}),e.showCaret?i.a.createElement("div",{className:"flex right-0 absolute top-0 mr-4 mt-3 cursor-pointer",onClick:e.caretClicked},e.showAddresses?i.a.createElement(k,{type:"up",color:r}):i.a.createElement(k,{type:"down",color:r})):null))},C=a(123),N=a(124),A=a(140),I=a(9),M=a(33);f()(p.a,{retryDelay:f.a.exponentialDelay});var _=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={showCaret:!1,showAddresses:!1,showLoader:!1,city:"",addresses:[],errorMessage:""},e.debounceAddress=v()(e.getAddresses,1e3),e.searchCity=function(t){e.setState({city:t.target.value,errorMessage:""}),e.debounceAddress()},e.toggleAddresses=function(){e.setState((function(e,t){return{showAddresses:!e.showAddresses}}))},e.setCity=function(){var t=Object(d.a)(u.a.mark((function t(a){var r,n,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=9;break}return e.setState({city:a.cityName.split(",")[0],showAddresses:!1}),Object(M.a)({category:"Address",action:"City Search",label:a.cityName}),t.next=5,Object(A.a)(a.cityId);case 5:r=t.sent,n=r.latlong,s=r.urbanArea,e.context.updateState({address:a,latlong:n,urbanArea:s});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(n.a)(a,[{key:"handleError",value:function(e){this.setState({errorMessage:e})}},{key:"getAddresses",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.city.trim()){e.next=18;break}return e.prev=1,this.setState({showLoader:!0}),e.next=5,p.a.get("https://api.teleport.org/api/cities/?search=".concat(this.state.city));case 5:t=e.sent,a=t.data,!Object(C.a)(a)&&!Object(N.a)(a)&&a.count>0?(r=a._embedded["city:search-results"].map((function(e){return{cityName:e.matching_full_name,cityId:e._links["city:item"].href.split("/")[5]}})),this.setState({addresses:r,showCaret:!0,showAddresses:!0,errorMessage:""})):(this.setState({showAddresses:!1}),this.handleError("No matching cities found. Try searching with a valid city name!")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),I.a(e.t0);case 13:return e.prev=13,this.setState({showLoader:!1}),e.finish(13);case 16:e.next=19;break;case 18:this.clearState();case 19:case"end":return e.stop()}}),e,this,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"clearState",value:function(){this.setState({showCaret:!1,showAddresses:!1,showLoader:!1,addresses:[],errorMessage:""})}},{key:"render",value:function(){var e=this;return i.a.createElement(o.Fragment,null,i.a.createElement("div",{className:"flex justify-center mt-5"},i.a.createElement("div",{className:"w-full sm:w-5/6 md:w-2/3 xl:max-w-5xl"},i.a.createElement(S,{city:this.state.city,showCaret:this.state.showCaret,showAddresses:this.state.showAddresses,citySearch:this.searchCity,caretClicked:this.toggleAddresses}))),i.a.createElement("div",{className:"flex justify-center"},i.a.createElement("div",{className:"w-full sm:w-5/6 md:w-2/3 xl:max-w-5xl"},this.state.showLoader?i.a.createElement(w.a,null):this.state.showAddresses&&i.a.createElement("div",{className:"mx-10 mt-0 border-solid border-2 border-gray-400 rounded-b-xl address-list"},this.state.addresses.map((function(t,a){return i.a.createElement(g,{address:t,key:a,addressSelected:function(){return e.setCity(t)}})}))),this.state.errorMessage.length>0&&i.a.createElement("div",{className:"flex justify-center"},i.a.createElement("div",{className:"w-5/6"},i.a.createElement(x.a,{errorMessage:this.state.errorMessage,showCloseBtn:!0,closeError:function(){e.setState({errorMessage:""})}}))))))}}]),a}(o.Component);_.contextType=E.a;var T=_,F=a(130),J=a(136),L=Object(o.lazy)((function(){return Promise.all([a.e(0),a.e(1),a.e(9)]).then(a.bind(null,172))})),D=Object(o.lazy)((function(){return Promise.all([a.e(0),a.e(10),a.e(1),a.e(8)]).then(a.bind(null,176))})),P=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return i.a.createElement(o.Fragment,null,i.a.createElement(F.b,null,i.a.createElement(E.b,null,i.a.createElement(T,null),i.a.createElement(J.a,null,i.a.createElement(o.Suspense,{fallback:i.a.createElement(w.a,{loaderText:"Loading components"})},i.a.createElement(L,null),i.a.createElement(D,null))))))}}]),a}(o.Component);P.contextType=y.a;t.default=P}}]);
//# sourceMappingURL=6.0fca16f1.chunk.js.map