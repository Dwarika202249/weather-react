(this["webpackJsonpweather-react"]=this["webpackJsonpweather-react"]||[]).push([[6],{101:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return o}));var r=a(49),n=a(1),s=a.n(n),c=s.a.createContext({weatherUnit:"F"}),o=function(e){var t=e.children,a=Object(n.useState)("F"),o=Object(r.a)(a,2),i=o[0],l=o[1];return Object(n.useEffect)((function(){localStorage.getItem("unit")?l(JSON.parse(localStorage.getItem("unit"))):localStorage.setItem("unit",JSON.stringify("F"))}),[]),s.a.createElement(c.Provider,{value:{weatherUnit:i,updateWeatherUnit:function(e){l(e),localStorage.setItem("unit",JSON.stringify(e))}}},t)}},107:function(e,t,a){"use strict";var r=a(97),n=a(98),s=a(103),c=a(99),o=a(104),i=a(1),l=a.n(i),u=a(95),d=a(8),h=a(92),m=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={hasError:!1,eventId:null},a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"componentDidCatch",value:function(e,t){var a=this;d.c((function(r){r.setExtras(t);var n=d.a(e);a.setState({eventId:n})}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,this.state.hasError?l.a.createElement("div",null,l.a.createElement(u.a,{errorMessage:"Something went wrong. Reload the page!"}),l.a.createElement("button",{className:"font-semibold py-3 px-6 rounded-full capitalize",onClick:function(){return h.b({eventId:e.state.eventId})}},"Report feedback")):this.props.children)}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(i.Component);t.a=m},119:function(e,t,a){"use strict";var r=a(94),n=a.n(r),s=a(100),c=a.n(s),o=a(106),i=a.n(o),l=a(91),u=a(168),d=a(8);i()(c.a,{retryDelay:i.a.exponentialDelay});t.a=function(e){var t,a,r,s,o;return n.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t="",a="",r="",s="",o=[],i.next=7,n.a.awrap(c.a.get("https://api.teleport.org/api/cities/".concat(e)).then((function(e){var i,d,h,m,p,f,b;return n.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:if(i=e.data,Object(l.a)(i)||Object(u.a)(i)||(d=i.location.latlon,h=d.latitude,m=d.longitude,t=h,a=m,i._links["city:urban_area"]&&(r=i._links["city:urban_area"].name)),!localStorage.getItem("urban-areas")||void 0===r){g.next=11;break}if(p=JSON.parse(localStorage.getItem("urban-areas")),!Object.keys(p).includes(r)){g.next=11;break}return s=p[r],g.next=8,n.a.awrap(c.a.get("https://api.teleport.org/api/urban_areas/slug:".concat(s,"/images")));case 8:f=g.sent,b=f.data,o=Object(l.a)(b)||Object(u.a)(b)?[]:b.photos;case 11:case"end":return g.stop()}}))})).catch((function(e){return d.a(e)})));case 7:return i.abrupt("return",{latlong:"".concat(t,",").concat(a),urbanArea:{name:r,slug:s,photos:o}});case 8:case"end":return i.stop()}}))}},157:function(e,t,a){},172:function(e,t,a){"use strict";a.r(t);var r=a(97),n=a(98),s=a(103),c=a(99),o=a(104),i=a(1),l=a.n(i),u=a(94),d=a.n(u),h=a(100),m=a.n(h),p=a(106),f=a.n(p),b=a(148),g=a.n(b),y=(a(157),a(13)),v=function(e){var t=Object(i.useContext)(y.a),a=t.theme,r=t.colorTheme;return l.a.createElement("p",{className:"px-5 py-1 cursor-pointer item text-".concat(r," hover:text-").concat(a," hover:bg-").concat(r),onClick:e.addressSelected},e.address.cityName)},w=a(48),x=a(95),E=a(96),j=a(120),O=a(158),S=function(e){var t=e.type,a=e.color,r={search:l.a.createElement(j.b,null),up:l.a.createElement(O.b,null),down:l.a.createElement(O.a,null)};return l.a.createElement("p",{className:"opacity-75 text-2xl fill-".concat(a)},r[t])},k=function(e){var t=Object(i.useContext)(y.a),a=t.theme,r=t.colorTheme;return l.a.createElement("div",{className:"h-12 mx-5 mt-5"},l.a.createElement("div",{className:"relative"},l.a.createElement("div",{className:"absolute top-0 left-0 ml-5 mt-3"},l.a.createElement(S,{type:"search",color:r})),l.a.createElement("input",{style:{backgroundColor:"".concat("dark"===a?"#3a3a3a":"#e2e8f0"),letterSpacing:"0.05em"},className:"data-hj-whitelist block appearance-none w-full border-none rounded-full shadow py-3 pl-12 pr-4 mb-3 leading-tight focus:outline-none focus:bg-gray-200 truncate text-".concat(r),id:"grid-first-name",type:"text",placeholder:"Type city name to find weather forecast",onChange:e.citySearch,value:e.city}),e.showCaret&&e.city.trim()?l.a.createElement("div",{className:"flex right-0 absolute top-0 mr-4 mt-3 cursor-pointer",onClick:e.caretClicked},e.showAddresses?l.a.createElement(S,{type:"up",color:r}):l.a.createElement(S,{type:"down",color:r})):null))},C=a(91),N=a(168),A=a(119),I=a(8),M=a(18);f()(m.a,{retryDelay:f.a.exponentialDelay});var _=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={showCaret:!1,showAddresses:!1,showLoader:!1,city:"",addresses:[],errorMessage:""},a.debounceAddress=g()(a.getAddresses,1e3),a.searchCity=function(e){a.setState({city:e.target.value}),e.target.value.trim()?(a.setState({errorMessage:""}),a.debounceAddress()):a.clearState()},a.toggleAddresses=function(){a.setState((function(e,t){return{showAddresses:!e.showAddresses}}))},a.setCity=function(e){var t,r,n;return d.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(!e){s.next=9;break}return a.setState({city:e.cityName.split(",")[0],showAddresses:!1}),Object(M.a)({category:"Address",action:"City Search",label:e.cityName}),s.next=5,d.a.awrap(Object(A.a)(e.cityId));case 5:t=s.sent,r=t.latlong,n=t.urbanArea,a.context.updateState({address:e,latlong:r,urbanArea:n});case 9:case"end":return s.stop()}}))},a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"handleError",value:function(e){this.setState({errorMessage:e})}},{key:"getAddresses",value:function(){var e,t,a;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,this.setState({showLoader:!0}),r.next=4,d.a.awrap(m.a.get("https://api.teleport.org/api/cities/?search=".concat(this.state.city)));case 4:e=r.sent,t=e.data,!Object(C.a)(t)&&!Object(N.a)(t)&&t.count>0?(a=t._embedded["city:search-results"].map((function(e){return{cityName:e.matching_full_name,cityId:e._links["city:item"].href.split("/")[5]}})),this.setState({addresses:a,showCaret:!0,showAddresses:!0,errorMessage:""})):(this.setState({showAddresses:!1}),this.handleError("No matching cities found. Try searching with a valid city name!")),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(0),this.handleError(r.t0),I.a(r.t0);case 13:return r.prev=13,this.setState({showLoader:!1}),r.finish(13);case 16:case"end":return r.stop()}}),null,this,[[0,9,13,16]])}},{key:"clearState",value:function(){this.setState({showCaret:!1,showAddresses:!1,showLoader:!1,addresses:[],errorMessage:""})}},{key:"render",value:function(){var e=this;return l.a.createElement(i.Fragment,null,l.a.createElement("div",{className:"flex justify-center mt-5"},l.a.createElement("div",{className:"w-full sm:w-5/6 md:w-2/3 xl:max-w-5xl"},l.a.createElement(k,{city:this.state.city,showCaret:this.state.showCaret,showAddresses:this.state.showAddresses,citySearch:this.searchCity,caretClicked:this.toggleAddresses}))),l.a.createElement("div",{className:"flex justify-center"},l.a.createElement("div",{className:"w-full sm:w-5/6 md:w-2/3 xl:max-w-5xl"},this.state.showLoader?l.a.createElement(w.a,null):this.state.showAddresses&&l.a.createElement("div",{className:"mx-10 mt-0 border-solid border-2 border-gray-400 rounded-b-xl address-list"},this.state.addresses.map((function(t,a){return l.a.createElement(v,{address:t,key:a,addressSelected:function(){return e.setCity(t)}})}))),this.state.errorMessage.length>0&&l.a.createElement("div",{className:"flex justify-center"},l.a.createElement("div",{className:"w-5/6"},l.a.createElement(x.a,{errorMessage:this.state.errorMessage,showCloseBtn:!0,closeError:function(){e.setState({errorMessage:""})}}))))))}}]),t}(i.Component);_.contextType=E.a;var F=_,T=a(101),J=a(107);a.d(t,"HomeContainer",(function(){return P}));var L=Object(i.lazy)((function(){return Promise.all([a.e(0),a.e(1),a.e(9)]).then(a.bind(null,170))})),D=Object(i.lazy)((function(){return Promise.all([a.e(0),a.e(10),a.e(1),a.e(8)]).then(a.bind(null,173))})),P=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return l.a.createElement(i.Fragment,null,l.a.createElement(T.b,null,l.a.createElement(E.b,null,l.a.createElement(F,null),l.a.createElement(J.a,null,l.a.createElement(i.Suspense,{fallback:l.a.createElement(w.a,{loaderText:"Loading components"})},l.a.createElement(L,null),l.a.createElement(D,null))))))}}]),t}(i.Component);P.contextType=y.a;t.default=P},95:function(e,t,a){"use strict";var r=a(1),n=a.n(r),s=a(13);t.a=function(e){var t=Object(r.useContext)(s.a).theme;return n.a.createElement("div",{className:"w-full ml-auto mr-auto h-auto bg-".concat(t," border border-red-400 text-red-700 mt-5 px-4 py-2 rounded relative"),role:"alert"},n.a.createElement("span",{className:"w-5/6 block break-words"},e.errorMessage),e.showCloseBtn&&n.a.createElement("span",{className:"absolute top-0 bottom-0 right-0 ml-3 mr-1 py-3",onClick:e.closeError},n.a.createElement("svg",{className:"fill-current h-6 w-6 text-red-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},n.a.createElement("title",null,"Close"),n.a.createElement("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"}))))}},96:function(e,t,a){"use strict";a.d(t,"a",(function(){return x})),a.d(t,"b",(function(){return E}));var r=a(127),n=a(94),s=a.n(n),c=a(105),o=a(97),i=a(98),l=a(103),u=a(99),d=a(104),h=a(1),m=a.n(h),p=a(100),f=a.n(p),b=a(9),g=a(91),y=a(168),v=a(119),w=a(8),x=m.a.createContext(null),E=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),d=0;d<n;d++)i[d]=arguments[d];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).updateState=function(e){a.setState(Object(c.a)({},e))},a.updateFavorites=function(e){a.setState(Object(c.a)({},e))},a.state={address:{cityName:"",cityId:""},urbanArea:{name:"",slug:"",photos:[]},latlong:"",favorites:[],updateState:a.updateState,updateFavorites:a.updateFavorites},a.fetchAddressInfo=function(){var e,t;return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e="",t={name:"",slug:"",photos:[]},r.next=4,s.a.awrap(f.a.get("https://ipapi.co/json").then((function(r){var n,c;return s.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(n=r.data,Object(g.a)(n)||Object(y.a)(n)){o.next=6;break}return c="".concat(n.city,", ").concat(n.region,", ").concat(n.country_name),o.next=5,s.a.awrap(f.a.get("https://api.teleport.org/api/cities/?search=".concat(c)).then((function(a){var r,n;return s.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(r=a.data,Object(g.a)(r)||Object(y.a)(r)||!(r.count>0)){c.next=6;break}return n=r._embedded["city:search-results"].map((function(e){return{cityId:e._links["city:item"].href.split("/")[5]}})),e=n[0].cityId,c.next=6,s.a.awrap(Object(v.a)(e).then((function(e){t=e.urbanArea})).catch((function(e){return w.a(e)})));case 6:case"end":return c.stop()}}))})).catch((function(e){return w.a(e)})));case 5:a.updateState({address:{cityName:c,cityId:e},latlong:"".concat(n.latitude,",").concat(n.longitude),urbanArea:t});case 6:case"end":return o.stop()}}))})).catch((function(e){return w.a(e)})));case 4:case"end":return r.stop()}}))},a.getFavorites=function(){localStorage.getItem("favorites")&&a.setState({favorites:Object(r.a)(JSON.parse(localStorage.getItem("favorites")))})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"getAddressInfo",value:function(){var e;return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,localStorage.getItem("urban-areas")){t.next=6;break}return t.next=4,s.a.awrap(f.a.get("https://gist.githubusercontent.com/iamsainikhil/4959bbe458ebf0c4bcbf7e24b4983c89/raw/170221bcd3d9732fec97210b9a67cd445e437481/urban_areas.json").then((function(e){return e.data})));case 4:e=t.sent,localStorage.setItem("urban-areas",JSON.stringify(e));case 6:this.fetchAddressInfo(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),w.a(t.t0);case 12:case"end":return t.stop()}}),null,this,[[0,9]])}},{key:"componentDidMount",value:function(){this.getAddressInfo(),this.getFavorites()}},{key:"render",value:function(){return m.a.createElement(x.Provider,{value:this.state},this.props.children)}}]),t}(h.Component);x.propTypes={address:b.PropTypes.objectOf(b.PropTypes.string),latlong:b.PropTypes.string}}}]);
//# sourceMappingURL=6.5989f363.chunk.js.map