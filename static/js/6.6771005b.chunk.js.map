{"version":3,"sources":["context/WeatherUnitContext.js","containers/error-boundary/ErrorBoundaryContainer.js","utils/LatLongUrbanArea.js","components/address/AddressComponent.js","components/search/SearchComponent.js","containers/autocomplete/AutoCompleteContainer.js","containers/home/HomeContainer.js","components/error/ErrorComponent.js","context/AddressContext.js"],"names":["WeatherUnitContext","React","createContext","weatherUnit","WeatherUnitContextProvider","children","useState","setWeatherUnit","useEffect","localStorage","getItem","JSON","parse","setItem","stringify","Provider","value","updateWeatherUnit","unit","ErrorBoundaryContainer","state","hasError","eventId","error","errorInfo","Sentry","scope","setExtras","setState","this","errorMessage","className","onClick","props","Component","axiosRetry","axios","retryDelay","exponentialDelay","getLatLongUrbanArea","cityId","a","async","lat","long","name","slug","photos","get","then","response","data","isEmpty","isUndefined","location","latlon","latitude","longitude","_links","undefined","urbanAreas","Object","keys","includes","catch","err","latlong","urbanArea","AddressComponent","useContext","ThemeContext","theme","colorTheme","addressSelected","address","cityName","IconComponent","type","color","TYPES","search","up","down","SearchComponent","style","backgroundColor","letterSpacing","id","placeholder","onChange","citySearch","city","showCaret","caretClicked","showAddresses","AutoCompleteContainer","showLoader","addresses","debounceAddress","debounce","getAddresses","searchCity","event","target","toggleAddresses","prevState","setCity","split","Event","category","action","label","context","updateState","message","trim","count","results","_embedded","map","result","matching_full_name","href","handleError","clearState","LoaderComponent","index","key","length","ErrorComponent","showCloseBtn","closeError","contextType","AddressContext","WeatherContainer","lazy","FavoritesContainer","HomeContainer","fallback","loaderText","role","xmlns","viewBox","d","AddressContextProvider","updateFavorites","favorites","fetchAddressInfo","region","country_name","cityInfo","cityIdArr","getFavorites","urban_areas","getAddressInfo","propTypes","PropTypes","objectOf","string"],"mappings":"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","file":"static/js/6.6771005b.chunk.js","sourcesContent":["import React, {useState, useEffect} from 'react'\r\nconst WeatherUnitContext = React.createContext({\r\n  weatherUnit: 'C'\r\n})\r\n\r\nconst WeatherUnitContextProvider = ({children}) => {\r\n  const [weatherUnit, setWeatherUnit] = useState('F')\r\n\r\n  /**\r\n   * @param {String} unit (F | C)\r\n   * @param {String} type (selectUnit | toggle)\r\n   */\r\n  const updateWeatherUnit = unit => {\r\n    setWeatherUnit(unit)\r\n    localStorage.setItem('unit', JSON.stringify(unit))\r\n  }\r\n\r\n  useEffect(() => {\r\n    // store preferred temperature unit in localStorage\r\n    if (!localStorage.getItem('unit')) {\r\n      localStorage.setItem('unit', JSON.stringify('F'))\r\n    } else {\r\n      setWeatherUnit(JSON.parse(localStorage.getItem('unit')))\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [])\r\n\r\n  return (\r\n    <WeatherUnitContext.Provider value={{weatherUnit, updateWeatherUnit}}>\r\n      {children}\r\n    </WeatherUnitContext.Provider>\r\n  )\r\n}\r\n\r\nexport {WeatherUnitContext, WeatherUnitContextProvider}\r\n","import React, {Component} from 'react'\r\nimport ErrorComponent from '../../components/error/ErrorComponent'\r\nimport * as Sentry from '@sentry/browser'\r\n\r\nexport class ErrorBoundaryContainer extends Component {\r\n  state = {\r\n    hasError: false,\r\n    eventId: null\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    // Update state so the next render will show the fallback UI.\r\n    return {hasError: true}\r\n  }\r\n\r\n  componentDidCatch(error, errorInfo) {\r\n    Sentry.withScope(scope => {\r\n      scope.setExtras(errorInfo)\r\n      const eventId = Sentry.captureException(error)\r\n      this.setState({eventId})\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {this.state.hasError ? (\r\n          <div>\r\n            <ErrorComponent\r\n              errorMessage={'Something went wrong. Reload the page!'}\r\n            />\r\n            <button\r\n              className='font-semibold py-3 px-6 rounded-full capitalize'\r\n              onClick={() =>\r\n                Sentry.showReportDialog({eventId: this.state.eventId})\r\n              }>\r\n              Report feedback\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          this.props.children\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ErrorBoundaryContainer\r\n","import axios from 'axios'\r\nimport axiosRetry from 'axios-retry'\r\nimport {isEmpty, isUndefined} from 'lodash-es'\r\nimport * as Sentry from '@sentry/browser'\r\n// Exponential back-off retry delay between requests\r\naxiosRetry(axios, {retryDelay: axiosRetry.exponentialDelay})\r\n\r\n/**\r\n * address is an object with cityName & cityId properties\r\n * @param {Object} address\r\n */\r\nconst getLatLongUrbanArea = async cityId => {\r\n  // defaults\r\n  let lat = ''\r\n  let long = ''\r\n  let name = ''\r\n  let slug = ''\r\n  let photos = []\r\n\r\n  // get lat, long, and name\r\n  await axios\r\n    .get(`https://api.teleport.org/api/cities/${cityId}`)\r\n    .then(async response => {\r\n      const {data} = response\r\n      if (!isEmpty(data) && !isUndefined(data)) {\r\n        const {latitude, longitude} = data.location.latlon\r\n        lat = latitude\r\n        long = longitude\r\n        if (data._links['city:urban_area']) {\r\n          name = data._links['city:urban_area'].name\r\n        }\r\n      }\r\n\r\n      // get slug and photos\r\n      if (localStorage.getItem('urban-areas') && name !== undefined) {\r\n        const urbanAreas = JSON.parse(localStorage.getItem('urban-areas'))\r\n        // get the value of the slug with the matched name in urbanAreas array\r\n        // i.e [{Washington, D.C.: \"washington-dc\"},...]\r\n        if (Object.keys(urbanAreas).includes(name)) {\r\n          slug = urbanAreas[name]\r\n          const {data} = await axios.get(\r\n            `https://api.teleport.org/api/urban_areas/slug:${slug}/images`\r\n          )\r\n          photos = !isEmpty(data) && !isUndefined(data) ? data.photos : []\r\n        }\r\n      }\r\n    })\r\n    .catch(err => Sentry.captureException(err))\r\n\r\n  return {\r\n    latlong: `${lat},${long}`,\r\n    urbanArea: {\r\n      name,\r\n      slug,\r\n      photos\r\n    }\r\n  }\r\n}\r\n\r\nexport default getLatLongUrbanArea\r\n","import React, {useContext} from 'react'\r\nimport {ThemeContext} from '../../context/ThemeContext'\r\nimport {PropTypes} from 'prop-types'\r\n\r\nconst AddressComponent = props => {\r\n  const {theme, colorTheme} = useContext(ThemeContext)\r\n  return (\r\n    <p\r\n      className={`px-5 py-1 cursor-pointer item text-${colorTheme} hover:text-${theme} hover:bg-${colorTheme}`}\r\n      onClick={props.addressSelected}>\r\n      {props.address.cityName}\r\n    </p>\r\n  )\r\n}\r\n\r\nexport default AddressComponent\r\n\r\nAddressComponent.propTypes = {\r\n  addressSelected: PropTypes.func,\r\n  address: PropTypes.objectOf(PropTypes.string)\r\n}\r\n","import React, {useContext} from 'react'\r\nimport {ThemeContext} from '../../context/ThemeContext'\r\nimport {PropTypes} from 'prop-types'\r\nimport {FiSearch} from 'react-icons/fi'\r\nimport {IoIosArrowUp, IoIosArrowDown} from 'react-icons/io'\r\n\r\nconst IconComponent = ({type, color}) => {\r\n  const TYPES = {\r\n    search: <FiSearch />,\r\n    up: <IoIosArrowUp />,\r\n    down: <IoIosArrowDown />\r\n  }\r\n  return <p className={`opacity-75 text-2xl fill-${color}`}>{TYPES[type]}</p>\r\n}\r\n\r\nconst SearchComponent = props => {\r\n  const {theme, colorTheme} = useContext(ThemeContext)\r\n  return (\r\n    <div className='h-12 mx-5 mt-5'>\r\n      <div className='relative'>\r\n        <div className='absolute top-0 left-0 ml-5 mt-3'>\r\n          <IconComponent type='search' color={colorTheme} />\r\n        </div>\r\n        <input\r\n          style={{\r\n            backgroundColor: `${theme === 'dark' ? '#3a3a3a' : '#e2e8f0'}`,\r\n            letterSpacing: '0.05em'\r\n          }}\r\n          className={`data-hj-whitelist block appearance-none w-full border-none rounded-full shadow py-3 pl-12 pr-6 mb-3 leading-tight focus:outline-none focus:bg-gray-200 truncate text-${colorTheme}`}\r\n          id='grid-first-name'\r\n          type='text'\r\n          placeholder='Type city name to find weather forecast'\r\n          onChange={props.citySearch}\r\n          value={props.city}\r\n        />\r\n        {props.showCaret ? (\r\n          <div\r\n            className='flex right-0 absolute top-0 mr-4 mt-3 cursor-pointer'\r\n            onClick={props.caretClicked}>\r\n            {props.showAddresses ? (\r\n              <IconComponent type='up' color={colorTheme} />\r\n            ) : (\r\n              <IconComponent type='down' color={colorTheme} />\r\n            )}\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SearchComponent\r\n\r\nSearchComponent.propTypes = {\r\n  city: PropTypes.string,\r\n  cityName: PropTypes.string,\r\n  showCaret: PropTypes.bool,\r\n  showAddresses: PropTypes.bool,\r\n  caretClicked: PropTypes.func\r\n}\r\n","import React, {Component, Fragment} from 'react'\r\nimport axios from 'axios'\r\nimport axiosRetry from 'axios-retry'\r\nimport debounce from 'lodash/debounce'\r\nimport './AutoCompleteStyle.scss'\r\nimport AddressComponent from '../../components/address/AddressComponent'\r\nimport LoaderComponent from '../../components/loader/LoaderComponent'\r\nimport ErrorComponent from '../../components/error/ErrorComponent'\r\nimport {AddressContext} from '../../context/AddressContext'\r\nimport SearchComponent from '../../components/search/SearchComponent'\r\nimport {isEmpty, isUndefined} from 'lodash-es'\r\nimport getLatLongUrbanArea from '../../utils/LatLongUrbanArea'\r\nimport * as Sentry from '@sentry/browser'\r\nimport {Event} from '../../utils/ReactAnalytics'\r\n\r\n// Exponential back-off retry delay between requests\r\naxiosRetry(axios, {retryDelay: axiosRetry.exponentialDelay})\r\n\r\nclass AutoCompleteContainer extends Component {\r\n  static contextType = AddressContext\r\n  state = {\r\n    showCaret: false,\r\n    showAddresses: false,\r\n    showLoader: false,\r\n    city: '',\r\n    addresses: [],\r\n    errorMessage: ''\r\n  }\r\n\r\n  handleError(message) {\r\n    this.setState({errorMessage: message})\r\n  }\r\n\r\n  // debounced function\r\n  debounceAddress = debounce(this.getAddresses, 1000)\r\n\r\n  searchCity = event => {\r\n    this.setState({city: event.target.value, errorMessage: ''})\r\n    this.debounceAddress()\r\n  }\r\n\r\n  // fetch valid matched addresses for searched city\r\n  async getAddresses() {\r\n    // check for empty city value since deleting city value character by character will trigger the debounceAddress\r\n    // city value could be empty when this function run\r\n    // so this extra check will fix the bug of showing addresses list when there is no city name\r\n    if (this.state.city.trim()) {\r\n      try {\r\n        this.setState({showLoader: true})\r\n        const {data} = await axios.get(\r\n          `https://api.teleport.org/api/cities/?search=${this.state.city}`\r\n        )\r\n\r\n        // populate addresses and show them if matching cities exist\r\n        if (!isEmpty(data) && !isUndefined(data) && data.count > 0) {\r\n          const results = data._embedded['city:search-results'].map(result => ({\r\n            cityName: result.matching_full_name,\r\n            cityId: result._links['city:item'].href.split('/')[5]\r\n          }))\r\n          // results is an array of `address` objects with cityName and cityId properties\r\n          this.setState({\r\n            addresses: results,\r\n            showCaret: true,\r\n            showAddresses: true,\r\n            errorMessage: ''\r\n          })\r\n        } else {\r\n          this.setState({showAddresses: false})\r\n          this.handleError(\r\n            'No matching cities found. Try searching with a valid city name!'\r\n          )\r\n        }\r\n      } catch (error) {\r\n        this.handleError(error)\r\n        Sentry.captureException(error)\r\n      } finally {\r\n        this.setState({showLoader: false})\r\n      }\r\n    } else {\r\n      this.clearState()\r\n    }\r\n  }\r\n\r\n  toggleAddresses = () => {\r\n    this.setState((prevState, props) => {\r\n      return {\r\n        showAddresses: !prevState.showAddresses\r\n      }\r\n    })\r\n  }\r\n\r\n  setCity = async address => {\r\n    if (address) {\r\n      // set city to just have cityName excluding state and country in the search input\r\n      // 'Herndon, Virginia, United States' -> 'Herndon'\r\n      this.setState({\r\n        city: address.cityName.split(',')[0],\r\n        showAddresses: false\r\n      })\r\n      // // track this cityName to GA\r\n      Event({\r\n        category: 'Address',\r\n        action: 'City Search',\r\n        label: address.cityName\r\n      })\r\n      // get latlong and urbanArea and update addressContext state for\r\n      // address, latlong, and urbanArea\r\n      const {latlong, urbanArea} = await getLatLongUrbanArea(address.cityId)\r\n      this.context.updateState({\r\n        address: address,\r\n        latlong: latlong,\r\n        urbanArea: urbanArea\r\n      })\r\n    }\r\n  }\r\n\r\n  clearState() {\r\n    this.setState({\r\n      showCaret: false,\r\n      showAddresses: false,\r\n      showLoader: false,\r\n      addresses: [],\r\n      errorMessage: ''\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <div className='flex justify-center mt-5'>\r\n          <div className='w-full sm:w-5/6 md:w-2/3 xl:max-w-5xl'>\r\n            <SearchComponent\r\n              city={this.state.city}\r\n              showCaret={this.state.showCaret}\r\n              showAddresses={this.state.showAddresses}\r\n              citySearch={this.searchCity}\r\n              caretClicked={this.toggleAddresses}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className='flex justify-center'>\r\n          <div className='w-full sm:w-5/6 md:w-2/3 xl:max-w-5xl'>\r\n            {this.state.showLoader ? (\r\n              <LoaderComponent />\r\n            ) : (\r\n              this.state.showAddresses && (\r\n                <div className='mx-10 mt-0 border-solid border-2 border-gray-400 rounded-b-xl address-list'>\r\n                  {this.state.addresses.map((address, index) => {\r\n                    return (\r\n                      <AddressComponent\r\n                        address={address}\r\n                        key={index}\r\n                        addressSelected={() => this.setCity(address)}\r\n                      />\r\n                    )\r\n                  })}\r\n                </div>\r\n              )\r\n            )}\r\n            {this.state.errorMessage.length > 0 && (\r\n              <div className='flex justify-center'>\r\n                <div className='w-5/6'>\r\n                  <ErrorComponent\r\n                    errorMessage={this.state.errorMessage}\r\n                    showCloseBtn={true}\r\n                    closeError={() => {\r\n                      this.setState({errorMessage: ''})\r\n                    }}\r\n                  />\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default AutoCompleteContainer\r\n","import React, {Component, Suspense, lazy, Fragment} from 'react'\r\nimport AutoCompleteContainer from '../autocomplete/AutoCompleteContainer'\r\nimport LoaderComponent from '../../components/loader/LoaderComponent'\r\nimport {AddressContextProvider} from '../../context/AddressContext'\r\nimport {WeatherUnitContextProvider} from '../../context/WeatherUnitContext'\r\nimport {ThemeContext} from '../../context/ThemeContext'\r\nimport ErrorBoundaryContainer from '../error-boundary/ErrorBoundaryContainer'\r\nconst WeatherContainer = lazy(() => import('./../weather/WeatherContainer'))\r\nconst FavoritesContainer = lazy(() => import('../favorites/FavoritesContainer'))\r\n\r\nexport class HomeContainer extends Component {\r\n  static contextType = ThemeContext\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <WeatherUnitContextProvider>\r\n          <AddressContextProvider>\r\n            <AutoCompleteContainer />\r\n            <ErrorBoundaryContainer>\r\n              <Suspense\r\n                fallback={\r\n                  <LoaderComponent loaderText={'Loading components'} />\r\n                }>\r\n                <WeatherContainer />\r\n                <FavoritesContainer />\r\n              </Suspense>\r\n            </ErrorBoundaryContainer>\r\n          </AddressContextProvider>\r\n        </WeatherUnitContextProvider>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default HomeContainer\r\n","import React, {useContext} from 'react'\r\nimport {ThemeContext} from '../../context/ThemeContext'\r\n\r\nconst ErrorComponent = props => {\r\n  const {theme} = useContext(ThemeContext)\r\n  return (\r\n    <div\r\n      className={`w-full ml-auto mr-auto h-auto bg-${theme} border border-red-400 text-red-700 mt-5 px-4 py-2 rounded relative`}\r\n      role='alert'>\r\n      <span className='w-5/6 block break-words'>{props.errorMessage}</span>\r\n      {props.showCloseBtn && (\r\n        <span\r\n          className='absolute top-0 bottom-0 right-0 ml-3 mr-1 py-3'\r\n          onClick={props.closeError}>\r\n          <svg\r\n            className='fill-current h-6 w-6 text-red-500'\r\n            role='button'\r\n            xmlns='http://www.w3.org/2000/svg'\r\n            viewBox='0 0 20 20'>\r\n            <title>Close</title>\r\n            <path d='M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z' />\r\n          </svg>\r\n        </span>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ErrorComponent\r\n","import React, {Component} from 'react'\r\nimport axios from 'axios'\r\nimport {PropTypes} from 'prop-types'\r\nimport {isEmpty, isUndefined} from 'lodash-es'\r\nimport getLatLongUrbanArea from '../utils/LatLongUrbanArea'\r\nimport * as Sentry from '@sentry/browser'\r\n\r\n// const token = process.env.REACT_APP_IPINFO_TOKEN\r\nconst AddressContext = React.createContext(null)\r\n\r\nclass AddressContextProvider extends Component {\r\n  updateState = state => {\r\n    this.setState({...state})\r\n  }\r\n\r\n  updateFavorites = state => {\r\n    this.setState({...state})\r\n  }\r\n  state = {\r\n    address: {\r\n      cityName: '',\r\n      cityId: ''\r\n    },\r\n    urbanArea: {\r\n      name: '',\r\n      slug: '',\r\n      photos: []\r\n    },\r\n    latlong: '',\r\n    favorites: [],\r\n    updateState: this.updateState,\r\n    updateFavorites: this.updateFavorites\r\n  }\r\n\r\n  fetchAddressInfo = async () => {\r\n    // defaults\r\n    let cityId = ''\r\n    let urbanArea = {\r\n      name: '',\r\n      slug: '',\r\n      photos: []\r\n    }\r\n    await axios\r\n      .get('https://ipapi.co/json')\r\n      .then(async response => {\r\n        const {data} = response\r\n        if (!isEmpty(data) && !isUndefined(data)) {\r\n          const cityName = `${data.city}, ${data.region}, ${data.country_name}`\r\n          await axios\r\n            .get(`https://api.teleport.org/api/cities/?search=${cityName}`)\r\n            .then(async response => {\r\n              const cityInfo = response.data\r\n              // get cityId if matching cities exist\r\n              if (\r\n                !isEmpty(cityInfo) &&\r\n                !isUndefined(cityInfo) &&\r\n                cityInfo.count > 0\r\n              ) {\r\n                const cityIdArr = cityInfo._embedded['city:search-results'].map(\r\n                  result => ({\r\n                    cityId: result._links['city:item'].href.split('/')[5]\r\n                  })\r\n                )\r\n\r\n                cityId = cityIdArr[0].cityId\r\n\r\n                // update urbanArea with the known cityId\r\n                await getLatLongUrbanArea(cityId)\r\n                  .then(response => {\r\n                    urbanArea = response.urbanArea\r\n                  })\r\n                  .catch(err => Sentry.captureException(err))\r\n              }\r\n            })\r\n            .catch(err => Sentry.captureException(err))\r\n\r\n          this.updateState({\r\n            address: {\r\n              cityName: cityName,\r\n              cityId: cityId\r\n            },\r\n            latlong: `${data.latitude},${data.longitude}`,\r\n            urbanArea\r\n          })\r\n        }\r\n      })\r\n      .catch(err => Sentry.captureException(err))\r\n  }\r\n\r\n  async getAddressInfo() {\r\n    try {\r\n      // fetch and store urban areas list in localStorage\r\n      if (!localStorage.getItem('urban-areas')) {\r\n        const urban_areas = await axios\r\n          .get(\r\n            'https://gist.githubusercontent.com/iamsainikhil/4959bbe458ebf0c4bcbf7e24b4983c89/raw/170221bcd3d9732fec97210b9a67cd445e437481/urban_areas.json'\r\n          )\r\n          .then(response => response.data)\r\n        localStorage.setItem('urban-areas', JSON.stringify(urban_areas))\r\n      }\r\n\r\n      // use ipapi.co API instead of using browser's default geolocation API\r\n      // since cityName is important and cannot be fetched using browser geolocation API\r\n      this.fetchAddressInfo()\r\n    } catch (error) {\r\n      Sentry.captureException(error)\r\n    }\r\n  }\r\n\r\n  getFavorites = () => {\r\n    if (localStorage.getItem('favorites')) {\r\n      this.setState({\r\n        favorites: [...JSON.parse(localStorage.getItem('favorites'))]\r\n      })\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getAddressInfo()\r\n    // update favorites for the initial application load\r\n    this.getFavorites()\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <AddressContext.Provider value={this.state}>\r\n        {this.props.children}\r\n      </AddressContext.Provider>\r\n    )\r\n  }\r\n}\r\n\r\nexport {AddressContext, AddressContextProvider}\r\n\r\nAddressContext.propTypes = {\r\n  address: PropTypes.objectOf(PropTypes.string),\r\n  latlong: PropTypes.string\r\n}\r\n"],"sourceRoot":""}