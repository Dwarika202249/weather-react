(this["webpackJsonpweather-react"]=this["webpackJsonpweather-react"]||[]).push([[6],{122:function(e,t,a){"use strict";var r=a(1),n=a.n(r),s=a(14);t.a=function(e){var t=Object(r.useContext)(s.a).theme;return n.a.createElement("div",{className:"w-full ml-auto mr-auto h-auto bg-".concat(t," border border-red-400 text-red-700 mt-5 px-4 py-2 rounded relative"),role:"alert"},n.a.createElement("span",{className:"w-5/6 block break-words"},e.errorMessage),e.showCloseBtn&&n.a.createElement("span",{className:"absolute top-0 bottom-0 right-0 ml-3 mr-1 py-3",onClick:e.closeError},n.a.createElement("svg",{className:"fill-current h-6 w-6 text-red-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},n.a.createElement("title",null,"Close"),n.a.createElement("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"}))))}},123:function(e,t,a){"use strict";a.d(t,"a",(function(){return w})),a.d(t,"b",(function(){return E}));var r=a(144),n=a(24),s=a.n(n),c=a(131),o=a(124),l=a(125),i=a(129),u=a(126),d=a(130),h=a(1),m=a.n(h),p=a(10),f=a(52),v=a.n(f),y=a(9),g=a(119),b=a(120),w=m.a.createContext(null),E=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),d=0;d<n;d++)l[d]=arguments[d];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).updateState=function(e){a.setState(Object(c.a)({},e))},a.updateFavorites=function(e){a.setState(Object(c.a)({},e))},a.state={address:{cityName:"",cityId:""},latlong:"",favorites:[],updateState:a.updateState,updateFavorites:a.updateFavorites},a.formatCoords=function(e,t){return"".concat(e,",").concat(t)},a.updateAddress=function(e){var t,r,n,c;return s.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t={},o.prev=1,o.next=4,s.a.awrap(v.a.get("https://places-dsn.algolia.net/1/places/reverse?aroundLatLng=".concat(e,",&hitsPerPage=1&language=en")));case 4:r=o.sent.data.hits,t=r[0],Object(g.a)(t)||Object(b.a)(t)||(n="".concat(t.city[0],", ").concat(t.administrative[0],", ").concat(t.country),c=t.objectID,a.updateState({address:{cityName:n,cityId:c},latlong:e})),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(1),y.a(o.t0);case 12:case"end":return o.stop()}}),null,null,[[1,9]])},a.getAddress=function(){var e,t,r;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!("geolocation"in navigator)){n.next=4;break}navigator.geolocation.getCurrentPosition((function(e){var t;return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:t=a.formatCoords(e.coords.latitude,e.coords.longitude),a.updateAddress(t);case 2:case"end":return r.stop()}}))})),n.next=16;break;case 4:return n.prev=4,n.next=7,s.a.awrap(v.a.get("https://ipapi.co/json"));case 7:e=n.sent,t=e.data,r=a.formatCoords(t.latitude,t.longitude),a.updateAddress(r),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(4),y.a(n.t0);case 16:case"end":return n.stop()}}),null,null,[[4,13]])},a.getFavorites=function(){localStorage.getItem("favorites")&&a.setState({favorites:Object(r.a)(JSON.parse(localStorage.getItem("favorites")))})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getAddress(),this.getFavorites()}},{key:"render",value:function(){return m.a.createElement(w.Provider,{value:this.state},this.props.children)}}]),t}(h.Component);w.propTypes={address:p.PropTypes.objectOf(p.PropTypes.string),favorites:p.PropTypes.array,updateState:p.PropTypes.func,updateFavorites:p.PropTypes.func}},127:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return o}));var r=a(51),n=a(1),s=a.n(n),c=s.a.createContext({weatherUnit:"C"}),o=function(e){var t=e.children,a=Object(n.useState)("C"),o=Object(r.a)(a,2),l=o[0],i=o[1];return Object(n.useEffect)((function(){localStorage.getItem("unit")?i(JSON.parse(localStorage.getItem("unit"))):localStorage.setItem("unit",JSON.stringify("C"))}),[]),s.a.createElement(c.Provider,{value:{weatherUnit:l,updateWeatherUnit:function(e){i(e),localStorage.setItem("unit",JSON.stringify(e))}}},t)}},132:function(e,t,a){"use strict";var r=a(124),n=a(125),s=a(129),c=a(126),o=a(130),l=a(1),i=a.n(l),u=a(122),d=a(9),h=a(121),m=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={hasError:!1,eventId:null},a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"componentDidCatch",value:function(e,t){var a=this;d.c((function(r){r.setExtras(t);var n=d.a(e);a.setState({eventId:n})}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,this.state.hasError?i.a.createElement("div",{className:"flex"},i.a.createElement("div",{className:"w-1/6"}),i.a.createElement("div",{className:"flex-col w-2/3 justify-center text-center"},i.a.createElement(u.a,{errorMessage:"Something went wrong. Reload the page!"}),i.a.createElement("button",{className:"font-semibold py-3 px-6 rounded-full capitalize text-sun",onClick:function(){return h.b({eventId:e.state.eventId})}},"Report feedback"))):this.props.children)}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(l.Component);t.a=m},157:function(e,t,a){},172:function(e,t,a){"use strict";a.r(t);var r=a(124),n=a(125),s=a(129),c=a(126),o=a(130),l=a(1),i=a.n(l),u=a(24),d=a.n(u),h=a(52),m=a.n(h),p=a(133),f=a.n(p),v=a(148),y=a.n(v),g=(a(157),a(14)),b=function(e){var t=Object(l.useContext)(g.a),a=t.theme,r=t.colorTheme;return i.a.createElement("p",{className:"px-5 py-1 cursor-pointer item text-".concat(r," hover:text-").concat(a," hover:bg-").concat(r),onClick:e.addressSelected},e.address.cityName)},w=a(50),E=a(122),x=a(123),j=a(137),S=a(158),O=function(e){var t=e.type,a=e.color,r={search:i.a.createElement(j.b,null),up:i.a.createElement(S.b,null),down:i.a.createElement(S.a,null)};return i.a.createElement("p",{className:"opacity-75 text-2xl fill-".concat(a)},r[t])},C=function(e){var t=Object(l.useContext)(g.a),a=t.theme,r=t.colorTheme;return i.a.createElement("div",{className:"h-12 mx-5 mt-5"},i.a.createElement("div",{className:"relative"},i.a.createElement("div",{className:"absolute top-0 left-0 ml-5 mt-3"},i.a.createElement(O,{type:"search",color:r})),i.a.createElement("input",{style:{backgroundColor:"".concat("dark"===a?"#3a3a3a":"#e2e8f0"),letterSpacing:"0.05em"},className:"data-hj-whitelist block appearance-none w-full border-none rounded-full shadow py-3 pl-12 pr-6 mb-3 leading-tight focus:outline-none focus:bg-gray-200 truncate text-".concat(r),id:"grid-first-name",type:"text",placeholder:"Type city name to find weather forecast",onChange:e.citySearch,value:e.city}),e.showCaret?i.a.createElement("div",{className:"flex right-0 absolute top-0 mr-4 mt-3 cursor-pointer",onClick:e.caretClicked},e.showAddresses?i.a.createElement(O,{type:"up",color:r}):i.a.createElement(O,{type:"down",color:r})):null))},k=a(119),N=a(120),A=a(9),I=a(32);f()(m.a,{retryDelay:f.a.exponentialDelay});var M=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={showCaret:!1,showAddresses:!1,showLoader:!1,city:"",addresses:[],errorMessage:""},a.debounceAddress=y()(a.getAddresses,1e3),a.searchCity=function(e){a.setState({city:e.target.value,errorMessage:""}),a.debounceAddress()},a.toggleAddresses=function(){a.setState((function(e){return{showAddresses:!e.showAddresses}}))},a.setCity=function(e){return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e&&(a.setState({city:e.cityName.split(",")[0],showAddresses:!1}),Object(I.a)({category:"Address",action:"City Search",label:e.cityName}),a.context.updateState({address:e,latlong:e.latlong}));case 1:case"end":return t.stop()}}))},a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"handleError",value:function(e){this.setState({errorMessage:e})}},{key:"getAddresses",value:function(){var e,t;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!this.state.city.trim()){a.next=18;break}return a.prev=1,this.setState({showLoader:!0}),a.next=5,d.a.awrap(m.a.post("https://places-dsn.algolia.net/1/places/query",{query:this.state.city,type:"city",aroundLatLng:this.context.address.latlong}));case 5:e=a.sent.data.hits,Object(k.a)(e)||Object(N.a)(e)?(this.setState({showAddresses:!1}),this.handleError("No matching cities found. Try searching with a valid city name!")):(t=e.map((function(e){var t="".concat(e.locale_names.default[0],", ").concat(e.administrative[0],", ").concat(e.country.default),a=e._geoloc,r=a.lat,n=a.lng;return{cityName:t,cityId:e.objectID,latlong:"".concat(r,",").concat(n)}})),this.setState({addresses:t,showCaret:!0,showAddresses:!0,errorMessage:""})),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(1),this.handleError(a.t0.response?a.t0.response:"Something went wrong! Please try again later."),A.a(a.t0);case 13:return a.prev=13,this.setState({showLoader:!1}),a.finish(13);case 16:a.next=19;break;case 18:this.clearState();case 19:case"end":return a.stop()}}),null,this,[[1,9,13,16]])}},{key:"clearState",value:function(){this.setState({showCaret:!1,showAddresses:!1,showLoader:!1,addresses:[],errorMessage:""})}},{key:"render",value:function(){var e=this;return i.a.createElement(l.Fragment,null,i.a.createElement("div",{className:"flex justify-center mt-5"},i.a.createElement("div",{className:"w-full sm:w-5/6 md:w-2/3 xl:max-w-5xl"},i.a.createElement(C,{city:this.state.city,showCaret:this.state.showCaret,showAddresses:this.state.showAddresses,citySearch:this.searchCity,caretClicked:this.toggleAddresses}))),i.a.createElement("div",{className:"flex justify-center"},i.a.createElement("div",{className:"w-full sm:w-5/6 md:w-2/3 xl:max-w-5xl"},this.state.showLoader?i.a.createElement(w.a,null):this.state.showAddresses&&i.a.createElement("div",{className:"mx-10 mt-0 border-solid border-2 border-gray-400 rounded-b-xl address-list"},this.state.addresses.map((function(t,a){return i.a.createElement(b,{address:t,key:a,addressSelected:function(){return e.setCity(t)}})}))),this.state.errorMessage.length>0&&i.a.createElement("div",{className:"flex justify-center"},i.a.createElement("div",{className:"w-5/6"},i.a.createElement(E.a,{errorMessage:this.state.errorMessage,showCloseBtn:!0,closeError:function(){e.setState({errorMessage:""})}}))))))}}]),t}(l.Component);M.contextType=x.a;var P=M,T=a(127),L=a(132);a.d(t,"HomeContainer",(function(){return J}));var F=Object(l.lazy)((function(){return Promise.all([a.e(0),a.e(1),a.e(9)]).then(a.bind(null,169))})),D=Object(l.lazy)((function(){return Promise.all([a.e(0),a.e(10),a.e(1),a.e(8)]).then(a.bind(null,173))})),J=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return i.a.createElement(l.Fragment,null,i.a.createElement(T.b,null,i.a.createElement(x.b,null,i.a.createElement(P,null),i.a.createElement(L.a,null,i.a.createElement(l.Suspense,{fallback:i.a.createElement(w.a,{loaderText:"Loading components"})},i.a.createElement(F,null),i.a.createElement(D,null))))))}}]),t}(l.Component);J.contextType=g.a;t.default=J}}]);
//# sourceMappingURL=6.9e8adb7f.chunk.js.map