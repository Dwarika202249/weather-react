(this["webpackJsonpweather-react"]=this["webpackJsonpweather-react"]||[]).push([[8],{175:function(e,t,a){"use strict";a.r(t);var r=a(92),n=a.n(r),c=a(108),l=a(47),o=a(1),s=a.n(o),u=a(94),i=a(128),m=a(130),d=a(125),b=a(89),f=a(170),x=a(173),h=a(127),p=a(122),j=a(13),g=a(124),w={background:"rgba(0,0,0,0.7)",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem"},v=function(e){var t,a=e.favorite,r=e.favoriteSelected,n=e.index,c=e.selectedIndex,l=Object(o.useContext)(j.a),u=l.theme,i=l.colorTheme;return s.a.createElement("div",{className:"relative w-full h-16"},Object(g.b)(a.urbanArea)?s.a.createElement(o.Fragment,null,s.a.createElement("img",{src:(t=a.urbanArea,Object(g.a)(t).image).web,alt:"city",className:"h-full w-full object-cover object-center rounded-2xl"})):null,s.a.createElement("div",{className:"".concat(Object(g.b)(a.urbanArea)?"absolute top-0 left-0 right-0 bottom-0 text-light ".concat(n===c?"sm:shadow-outline":"sm:outline-none"):"h-16 text-".concat(i," bg-").concat(u," hover:bg-").concat(i," hover:text-").concat(u," border ").concat(n===c?"sm:border-teal-600":"sm:border-".concat(i))," pt-5 lg:pt-1/2 font-semibold rounded-2xl cursor-pointer text-center justify-center"),style:Object(g.b)(a.urbanArea)?w:null,onClick:r},a.address.cityName.split(", ")[0]))},O=a(46),E=a(93),y=a(8),N=a(126);t.default=function(){var e=Object(o.useContext)(u.a).favorites,t=Object(o.useContext)(j.a),a=t.theme,r=t.colorTheme,g=Object(o.useState)({}),w=Object(l.a)(g,2),k=w[0],C=w[1],S=Object(o.useState)({}),A=Object(l.a)(S,2),F=A[0],T=A[1],I=Object(o.useState)(!1),R=Object(l.a)(I,2),z=R[0],_=R[1],D=Object(o.useState)(null),J=Object(l.a)(D,2),P=J[0],L=J[1],M=Object(o.useRef)(null),q=Object(o.useRef)(0),B=function(){return!Object(b.a)(k)&&!Object(f.a)(k)&&(!Object(b.a)(k.address.cityName)&&!Object(f.a)(k.address.cityName))},G=function(t){e[t]&&(Object(N.a)("favorites",e[t].address.cityName),C(Object(c.a)({},e[t]))),L(t)},H=function(){return n.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(f.a)(k)||!Object.keys(k).length){e.next=4;break}return _(!0),e.next=4,n.a.awrap(Object(d.a)(k).then((function(e){Object(b.a)(e)||Object(f.a)(e)||(T((function(t){return Object(c.a)({},t,{},e)})),K())})).catch((function(e){return y.a(e)})).finally((function(){return _(!1)})));case 4:case"end":return e.stop()}}))},K=function(){var e;e=M,window.scrollTo(0,e.current.offsetTop)};return Object(o.useEffect)((function(){H(),Object(b.a)(k)||Object(f.a)(k)||(Object(f.a)(Object(x.a)(e,(function(e){return e.address.cityName===k.address.cityName})))?G(P):e.length>q.current&&G(e.length-1)),q.current=e.length;var t=setInterval((function(){H()}),36e5);return function(){clearInterval(t)}}),[k,e]),s.a.createElement(o.Fragment,null,e.length>0?s.a.createElement("div",{className:"bg-".concat(a," pt-10 pb-24 mb-0")},s.a.createElement("p",{className:"text-center font-bold text-2xl text-".concat(r)},"Favorites"),s.a.createElement("div",{className:"sm:hidden px-5 py-5"},s.a.createElement(h.a,Object.assign({},Object(p.a)("favorite"),{slideIndex:P,afterSlide:function(e){return G(e)}}),e.map((function(e,t){return s.a.createElement(v,{key:e.latlong,favorite:e,index:t,selectedIndex:P,favoriteSelected:function(){return G(t)}})})))),s.a.createElement("div",{className:"hidden sm:flex justify-center items-center"},s.a.createElement("div",{className:"sm:w-5/6 xl:max-w-6xl px-5 py-5"},s.a.createElement("div",{className:"flex sm:flex-row flex-wrap justify-center"},e.map((function(e,t){return s.a.createElement("div",{className:"m-2 sm:w-1/2 md:w-1/4",key:e.latlong},s.a.createElement(v,{key:e.latlong,favorite:e,index:t,selectedIndex:P,favoriteSelected:function(){return G(t)}}))}))))),s.a.createElement("div",{ref:M},Object(b.a)(F.weatherCurrent)||Object(f.a)(F.weatherCurrent)?s.a.createElement(o.Fragment,null,z?s.a.createElement(O.a,{loaderText:"Fetching weather forecast ".concat(B()?"for ".concat(k.address.cityName):""," \ud83d\ude0e")}):s.a.createElement("div",null,B()?s.a.createElement("div",{className:"flex justify-center"},s.a.createElement("div",{className:"sm:w-full lg:w-2/3 xl:w-1/2"},s.a.createElement(E.a,{errorMessage:"Something went wrong. Failed to fetch weather forecast ".concat(B()?"for ".concat(k.address.cityName):"","! \ud83d\ude22")}))):null)):s.a.createElement(o.Fragment,null,s.a.createElement("div",{className:"flex justify-center px-5 pt-10"},s.a.createElement("div",{className:"sm:w-full lg:w-5/6 xl:max-w-6xl border border-".concat(r," bg-{theme} text-").concat(r," rounded-t-2xl shadow-lg")},s.a.createElement(i.a,{weatherCurrent:F.weatherCurrent,address:k.address,latlong:k.latlong,urbanArea:k.urbanArea}),s.a.createElement(m.a,{cityName:k.address.cityName,weatherCurrent:F.weatherCurrent,weatherForecast:F.weatherForecast}))),s.a.createElement("p",{className:"mx-auto text-center pt-2 pb-10 text-xs font-light text-".concat(r," bg-").concat(a)},"Powered by\xa0",s.a.createElement("a",{href:"https://darksky.net/poweredby/",target:"_blank",rel:"noreferrer noopener",className:"link z-0 font-medium hover:text-".concat(a),onClick:function(){return Object(N.a)("powered-by","Dark Sky")}},"Dark Sky")),s.a.createElement("div",{className:"bg-".concat(a)},k.urbanArea.slug?s.a.createElement("div",{className:"mx-auto text-center pb-5"},s.a.createElement("p",null,s.a.createElement("a",{href:"https://teleport.org/cities/".concat(k.urbanArea.slug),target:"_blank",rel:"noreferrer noopener",className:"hover:no-underline",onClick:function(){return Object(N.a)("explore-life",k.urbanArea.name)}},s.a.createElement("button",{className:"bg-".concat(r," text-").concat(a," font-semibold py-3 px-6 rounded-full capitalize")},"Explore life in ",k.urbanArea.name))),s.a.createElement("p",{className:"py-1 text-xs font-light text-".concat(r)},"Powered by\xa0",s.a.createElement("a",{href:"https://teleport.org/",target:"_blank",rel:"noreferrer noopener",className:"link z-0 font-medium hover:text-".concat(a),onClick:function(){return Object(N.a)("powered-by","Teleport")}},"Teleport"))):null)))):null)}}}]);
//# sourceMappingURL=8.06de83ed.chunk.js.map