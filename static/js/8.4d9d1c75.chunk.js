(this["webpackJsonpweather-react"]=this["webpackJsonpweather-react"]||[]).push([[8],{174:function(e,t,a){"use strict";a.r(t);var r=a(24),n=a.n(r),c=a(131),l=a(51),o=a(1),s=a.n(o),u=a(123),i=a(139),m=a(119),b=a(120),d=a(171),f=a(172),h=a(143),j=a(140),p=a(14),v=function(e){return(!Object(b.a)(e.photos)||!Object(m.a)(e.photos))&&e.photos.length>0},O=function(e){return function(e){var t=(v(e)?e.photos[0]:{mobile:"",web:""}).image,a=v(e)?e.photos[0].attribution:{photographer:"",site:"",source:""};return{image:t,photographer:a.photographer,site:a.site,source:a.source}}(e).image},g={background:"rgba(0,0,0,0.7)",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem"},x=function(e){var t=e.favorite,a=e.favoriteSelected,r=e.index,n=e.selectedIndex,c=Object(o.useContext)(p.a),l=c.theme,u=c.colorTheme;return s.a.createElement("div",{className:"relative w-full h-16"},v(t.urbanArea)?s.a.createElement(o.Fragment,null,s.a.createElement("img",{src:O(t.urbanArea).web,alt:"city",className:"h-full w-full object-cover object-center rounded-2xl"})):null,s.a.createElement("div",{className:"".concat(v(t.urbanArea)?"absolute top-0 left-0 right-0 bottom-0 text-light ".concat(r===n?"sm:shadow-outline":"sm:outline-none"):"h-16 text-".concat(u," bg-").concat(l," hover:bg-").concat(u," hover:text-").concat(l," border ").concat(r===n?"sm:border-teal-600":"sm:border-".concat(u))," pt-5 lg:pt-1/2 font-semibold rounded-2xl cursor-pointer text-center justify-center"),style:v(t.urbanArea)?g:null,onClick:a},t.address.cityName.split(", ")[0]))},w=a(144),E=a(50),y=a(122),N=a(9),k=a(142);t.default=function(){var e=Object(o.useContext)(u.a).favorites,t=Object(o.useContext)(p.a),a=t.theme,r=t.colorTheme,v=Object(o.useState)({}),O=Object(l.a)(v,2),g=O[0],C=O[1],S=Object(o.useState)({}),F=Object(l.a)(S,2),T=F[0],A=F[1],I=Object(o.useState)(!1),R=Object(l.a)(I,2),J=R[0],L=R[1],M=Object(o.useState)(null),q=Object(l.a)(M,2),z=q[0],B=q[1],D=Object(o.useRef)(),G=Object(o.useRef)(0),H=function(){if(Object(m.a)(g)||Object(b.a)(g)||Object(d.a)(g))return!1;var e=g.address.cityName;return!Object(m.a)(e)&&!Object(b.a)(e)&&!e.includes("")&&!e.includes("null")},K=function(t){e[t]&&(Object(k.a)("favorites",e[t].address.cityName),C(Object(c.a)({},e[t]))),B(t)},P=function(){var e;return n.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(b.a)(g)||!Object.keys(g).length){t.next=15;break}return t.prev=1,L(!0),t.next=5,n.a.awrap(Object(i.a)(g));case 5:e=t.sent,Object(m.a)(e)||Object(b.a)(e)||Object(d.a)(e)||(A((function(t){return Object(c.a)({},t,{},e)})),Q()),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),N.a(t.t0);case 12:return t.prev=12,L(!1),t.finish(12);case 15:case"end":return t.stop()}}),null,null,[[1,9,12,15]])},Q=function(){var e;e=D,window.scrollTo(0,e.current.offsetTop)};return Object(o.useEffect)((function(){P(),Object(m.a)(g)||Object(b.a)(g)||Object(d.a)(g)||(Object(b.a)(Object(f.a)(e,(function(e){return e.address.cityName===g.address.cityName})))?K(z):e.length>G.current&&K(e.length-1)),G.current=e.length;var t=setInterval((function(){P()}),36e5);return function(){clearInterval(t)}}),[g,e]),s.a.createElement(o.Fragment,null,e.length>0?s.a.createElement("div",{className:"bg-".concat(a," pt-10 pb-24 mb-0")},s.a.createElement("p",{className:"text-center font-bold text-2xl text-".concat(r)},"Favorites"),s.a.createElement("div",{className:"sm:hidden px-5 py-5"},s.a.createElement(h.a,Object.assign({},Object(j.a)("favorite"),{slideIndex:z,afterSlide:function(e){return K(e)}}),e.map((function(e,t){return s.a.createElement(x,{key:e.latlong,favorite:e,index:t,selectedIndex:z,favoriteSelected:function(){return K(t)}})})))),s.a.createElement("div",{className:"hidden sm:flex justify-center items-center"},s.a.createElement("div",{className:"sm:w-5/6 xl:max-w-6xl px-5 py-5"},s.a.createElement("div",{className:"flex sm:flex-row flex-wrap justify-center"},e.map((function(e,t){return s.a.createElement("div",{className:"m-2 sm:w-1/2 md:w-1/4",key:e.latlong},s.a.createElement(x,{key:e.latlong,favorite:e,index:t,selectedIndex:z,favoriteSelected:function(){return K(t)}}))}))))),s.a.createElement("div",{ref:D},Object(m.a)(T.weatherCurrent)||Object(b.a)(T.weatherCurrent)||Object(d.a)(T.weatherCurrent)?s.a.createElement(o.Fragment,null,J?s.a.createElement(E.a,{loaderText:"Fetching weather forecast ".concat(H()?"for ".concat(g.address.cityName):""," \ud83d\ude0e")}):s.a.createElement("div",null,H()?s.a.createElement("div",{className:"flex justify-center"},s.a.createElement("div",{className:"sm:w-full lg:w-2/3 xl:w-1/2"},s.a.createElement(y.a,{errorMessage:"Something went wrong. Failed to fetch weather forecast ".concat(H()?"for ".concat(g.address.cityName):"","! \ud83d\ude22")}))):null)):s.a.createElement(w.a,{weatherCurrent:T.weatherCurrent,weatherForecast:T.weatherForecast,address:g.address,latlong:g.latlong,urbanArea:g.urbanArea}))):null)}}}]);
//# sourceMappingURL=8.4d9d1c75.chunk.js.map