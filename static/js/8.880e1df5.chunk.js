(this["webpackJsonpweather-react"]=this["webpackJsonpweather-react"]||[]).push([[8],{173:function(e,t,a){"use strict";a.r(t);var r=a(94),n=a.n(r),c=a(105),o=a(49),l=a(1),s=a.n(l),u=a(96),i=a(121),d=a(91),m=a(168),f=a(171),b=a(125),h=a(122),j=a(13),p=function(e){return(!Object(m.a)(e.photos)||!Object(d.a)(e.photos))&&e.photos.length>0},g=function(e){return function(e){var t=(p(e)?e.photos[0]:{mobile:"",web:""}).image,a=p(e)?e.photos[0].attribution:{photographer:"",site:"",source:""};return{image:t,photographer:a.photographer,site:a.site,source:a.source}}(e).image},v={background:"rgba(0,0,0,0.7)",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem"},O=function(e){var t=e.favorite,a=e.favoriteSelected,r=e.index,n=e.selectedIndex,c=Object(l.useContext)(j.a),o=c.theme,u=c.colorTheme;return s.a.createElement("div",{className:"relative w-full h-16"},p(t.urbanArea)?s.a.createElement(l.Fragment,null,s.a.createElement("img",{src:g(t.urbanArea).web,alt:"city",className:"h-full w-full object-cover object-center rounded-2xl"})):null,s.a.createElement("div",{className:"".concat(p(t.urbanArea)?"absolute top-0 left-0 right-0 bottom-0 text-light ".concat(r===n?"sm:shadow-outline":"sm:outline-none"):"h-16 text-".concat(u," bg-").concat(o," hover:bg-").concat(u," hover:text-").concat(o," border ").concat(r===n?"sm:border-teal-600":"sm:border-".concat(u))," pt-5 lg:pt-1/2 font-semibold rounded-2xl cursor-pointer text-center justify-center"),style:p(t.urbanArea)?v:null,onClick:a},t.address.cityName.split(", ")[0]))},x=a(126),w=a(48),E=a(95),y=a(8),N=a(124);t.default=function(){var e=Object(l.useContext)(u.a).favorites,t=Object(l.useContext)(j.a),a=t.theme,r=t.colorTheme,p=Object(l.useState)({}),g=Object(o.a)(p,2),v=g[0],k=g[1],S=Object(l.useState)({}),C=Object(o.a)(S,2),F=C[0],T=C[1],A=Object(l.useState)(!1),I=Object(o.a)(A,2),R=I[0],J=I[1],L=Object(l.useState)(null),M=Object(o.a)(L,2),q=M[0],z=M[1],B=Object(l.useRef)(null),D=Object(l.useRef)(0),G=function(){if(Object(d.a)(v)||Object(m.a)(v))return!1;var e=v.address.cityName;return!Object(d.a)(e)&&!Object(m.a)(e)&&"undefined, undefined, undefined"!==e},H=function(t){e[t]&&(Object(N.a)("favorites",e[t].address.cityName),k(Object(c.a)({},e[t]))),z(t)},K=function(){return n.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(m.a)(v)||!Object.keys(v).length){e.next=4;break}return J(!0),e.next=4,n.a.awrap(Object(i.a)(v).then((function(e){Object(d.a)(e)||Object(m.a)(e)||(T((function(t){return Object(c.a)({},t,{},e)})),P())})).catch((function(e){return y.a(e)})).finally((function(){return J(!1)})));case 4:case"end":return e.stop()}}))},P=function(){var e;e=B,window.scrollTo(0,e.current.offsetTop)};return Object(l.useEffect)((function(){K(),Object(d.a)(v)||Object(m.a)(v)||(Object(m.a)(Object(f.a)(e,(function(e){return e.address.cityName===v.address.cityName})))?H(q):e.length>D.current&&H(e.length-1)),D.current=e.length;var t=setInterval((function(){K()}),36e5);return function(){clearInterval(t)}}),[v,e]),s.a.createElement(l.Fragment,null,e.length>0?s.a.createElement("div",{className:"bg-".concat(a," pt-10 pb-24 mb-0")},s.a.createElement("p",{className:"text-center font-bold text-2xl text-".concat(r)},"Favorites"),s.a.createElement("div",{className:"sm:hidden px-5 py-5"},s.a.createElement(b.a,Object.assign({},Object(h.a)("favorite"),{slideIndex:q,afterSlide:function(e){return H(e)}}),e.map((function(e,t){return s.a.createElement(O,{key:e.latlong,favorite:e,index:t,selectedIndex:q,favoriteSelected:function(){return H(t)}})})))),s.a.createElement("div",{className:"hidden sm:flex justify-center items-center"},s.a.createElement("div",{className:"sm:w-5/6 xl:max-w-6xl px-5 py-5"},s.a.createElement("div",{className:"flex sm:flex-row flex-wrap justify-center"},e.map((function(e,t){return s.a.createElement("div",{className:"m-2 sm:w-1/2 md:w-1/4",key:e.latlong},s.a.createElement(O,{key:e.latlong,favorite:e,index:t,selectedIndex:q,favoriteSelected:function(){return H(t)}}))}))))),s.a.createElement("div",{ref:B},Object(d.a)(F.weatherCurrent)||Object(m.a)(F.weatherCurrent)?s.a.createElement(l.Fragment,null,R?s.a.createElement(w.a,{loaderText:"Fetching weather forecast ".concat(G()?"for ".concat(v.address.cityName):""," \ud83d\ude0e")}):s.a.createElement("div",null,G()?s.a.createElement("div",{className:"flex justify-center"},s.a.createElement("div",{className:"sm:w-full lg:w-2/3 xl:w-1/2"},s.a.createElement(E.a,{errorMessage:"Something went wrong. Failed to fetch weather forecast ".concat(G()?"for ".concat(v.address.cityName):"","! \ud83d\ude22")}))):null)):s.a.createElement(x.a,{weatherCurrent:F.weatherCurrent,weatherForecast:F.weatherForecast,address:v.address,latlong:v.latlong,urbanArea:v.urbanArea}))):null)}}}]);
//# sourceMappingURL=8.880e1df5.chunk.js.map