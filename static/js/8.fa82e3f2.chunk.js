(this["webpackJsonpweather-react"]=this["webpackJsonpweather-react"]||[]).push([[8],{176:function(e,t,a){"use strict";a.r(t);var r=a(24),n=a.n(r),c=a(31),o=a(134),l=a(53),s=a(1),u=a.n(s),i=a(127),m=a(142),b=a(173),d=a(123),f=a(124),h=a(174),j=a(146),p=a(143),O=a(14),v=function(e){return(!Object(f.a)(e.photos)||!Object(d.a)(e.photos))&&e.photos.length>0},g=function(e){return function(e){var t=(v(e)?e.photos[0]:{mobile:"",web:""}).image,a=v(e)?e.photos[0].attribution:{photographer:"",site:"",source:""};return{image:t,photographer:a.photographer,site:a.site,source:a.source}}(e).image},x={background:"rgba(0,0,0,0.7)",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem"},w=function(e){var t=e.favorite,a=e.favoriteSelected,r=e.index,n=e.selectedIndex,c=Object(s.useContext)(O.a),o=c.theme,l=c.colorTheme;return u.a.createElement("div",{className:"relative w-full h-16"},v(t.urbanArea)?u.a.createElement(s.Fragment,null,u.a.createElement("img",{src:g(t.urbanArea).web,alt:"city",className:"h-full w-full object-cover object-center rounded-2xl"})):null,u.a.createElement("div",{className:"".concat(v(t.urbanArea)?"absolute top-0 left-0 right-0 bottom-0 text-light ".concat(r===n?"sm:shadow-outline":"sm:outline-none"):"h-16 text-".concat(l," bg-").concat(o," hover:bg-").concat(l," hover:text-").concat(o," border ").concat(r===n?"sm:border-teal-600":"sm:border-".concat(l))," pt-5 lg:pt-1/2 font-semibold rounded-2xl cursor-pointer text-center justify-center"),style:v(t.urbanArea)?x:null,onClick:a},t.address.cityName.split(", ")[0]))},E=a(147),y=a(52),N=a(126),k=a(9),C=a(145);t.default=function(){var e=Object(s.useContext)(i.a).favorites,t=Object(s.useContext)(O.a),a=t.theme,r=t.colorTheme,v=Object(s.useState)({}),g=Object(l.a)(v,2),x=g[0],S=g[1],F=Object(s.useState)({}),T=Object(l.a)(F,2),A=T[0],I=T[1],R=Object(s.useState)(!1),J=Object(l.a)(R,2),L=J[0],M=J[1],q=Object(s.useState)(null),z=Object(l.a)(q,2),B=z[0],D=z[1],G=Object(s.useRef)(),H=Object(s.useRef)(0),K=function(){if(Object(d.a)(x)||Object(f.a)(x)||Object(b.a)(x))return!1;var e=x.address.cityName;return!Object(d.a)(e)&&!Object(f.a)(e)&&!e.includes("")&&!e.includes("null")},P=function(t){e[t]&&(Object(C.a)("favorites",e[t].address.cityName),S(Object(o.a)({},e[t]))),D(t)},Q=function(){var e=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(f.a)(x)||!Object.keys(x).length){e.next=15;break}return e.prev=1,M(!0),e.next=5,Object(m.a)(x);case 5:t=e.sent,Object(d.a)(t)||Object(f.a)(t)||Object(b.a)(t)||(I((function(e){return Object(o.a)({},e,{},t)})),U()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),k.a(e.t0);case 12:return e.prev=12,M(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e;e=G,Object(b.a)(e.current)||window.scrollTo(0,e.current.offsetTop)};return Object(s.useEffect)((function(){Q(),Object(d.a)(x)||Object(f.a)(x)||Object(b.a)(x)||(Object(f.a)(Object(h.a)(e,(function(e){return e.address.cityName===x.address.cityName})))?P(B):e.length>H.current&&P(e.length-1)),H.current=e.length;var t=setInterval((function(){Q()}),36e5);return function(){clearInterval(t)}}),[x,e]),u.a.createElement(s.Fragment,null,e.length>0?u.a.createElement("div",{className:"bg-".concat(a," pt-10 pb-24 mb-0")},u.a.createElement("p",{className:"text-center font-bold text-2xl text-".concat(r)},"Favorites"),u.a.createElement("div",{className:"sm:hidden px-5 py-5"},u.a.createElement(j.a,Object.assign({},Object(p.a)("favorite"),{slideIndex:B,afterSlide:function(e){return P(e)}}),e.map((function(e,t){return u.a.createElement(w,{key:e.latlong,favorite:e,index:t,selectedIndex:B,favoriteSelected:function(){return P(t)}})})))),u.a.createElement("div",{className:"hidden sm:flex justify-center items-center"},u.a.createElement("div",{className:"sm:w-5/6 xl:max-w-6xl px-5 py-5"},u.a.createElement("div",{className:"flex sm:flex-row flex-wrap justify-center"},e.map((function(e,t){return u.a.createElement("div",{className:"m-2 sm:w-1/2 md:w-1/4",key:e.latlong},u.a.createElement(w,{key:e.latlong,favorite:e,index:t,selectedIndex:B,favoriteSelected:function(){return P(t)}}))}))))),u.a.createElement("div",{ref:G},Object(d.a)(A.weatherCurrent)||Object(f.a)(A.weatherCurrent)||Object(b.a)(A.weatherCurrent)?u.a.createElement(s.Fragment,null,L?u.a.createElement(y.a,{loaderText:"Fetching weather forecast ".concat(K()?"for ".concat(x.address.cityName):""," \ud83d\ude0e")}):u.a.createElement("div",null,K()?u.a.createElement("div",{className:"flex justify-center"},u.a.createElement("div",{className:"sm:w-full lg:w-2/3 xl:w-1/2"},u.a.createElement(N.a,{errorMessage:"Something went wrong. Failed to fetch weather forecast ".concat(K()?"for ".concat(x.address.cityName):"","! \ud83d\ude22")}))):null)):u.a.createElement(E.a,{weatherCurrent:A.weatherCurrent,weatherForecast:A.weatherForecast,address:x.address,latlong:x.latlong,urbanArea:x.urbanArea}))):null)}}}]);
//# sourceMappingURL=8.fa82e3f2.chunk.js.map