(this["webpackJsonpweather-react"]=this["webpackJsonpweather-react"]||[]).push([[1],{106:function(e,t,a){},107:function(e,t,a){},114:function(e,t,a){},117:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(66),c=a.n(s),o=a(36),i=(a(78),a(18)),l=a(13),u=a(14),d=a(16),m=a(15),h=a(17),g=(a(79),a(7)),f=a.n(g),p=a(19),b=a.n(p),v=a(67),y=a.n(v),w=(a(106),a(5)),E=function(e){var t=Object(r.useContext)(w.a),a=t.theme,s=t.colorTheme;return n.a.createElement("p",{className:"px-5 py-1 cursor-pointer item text-".concat(s," hover:text-").concat(a," hover:bg-").concat(s),onClick:e.addressSelected},e.address.cityName)},j=a(24),x=a(27),O=a(25),k=function(e){return n.a.createElement("div",{className:"h-12 mx-5 mt-5"},n.a.createElement("div",{className:"relative"},n.a.createElement("div",{className:"absolute top-0 left-0 ml-4 mt-4"},n.a.createElement("img",{src:"./city-weather-search.svg",alt:"city search",className:"h-6 object-contain object-center"})),n.a.createElement("input",{className:"block appearance-none w-full bg-gray-300 border-none rounded-full shadow py-3 pl-12 pr-4 mb-3 leading-tight focus:outline-none focus:bg-light truncate",id:"grid-first-name",type:"text",placeholder:"Type city name to find weather forecast",onChange:e.citySearch,value:e.city}),e.showCaret&&e.city.trim()?n.a.createElement("div",{className:"flex right-0 absolute top-0 mr-4 mt-4 cursor-pointer",onClick:e.caretClicked},e.showAddresses?n.a.createElement("img",{src:"./up-arrow.svg",alt:"arrow-up",className:"h-4 object-contain object-center"}):n.a.createElement("img",{src:"./down-arrow.svg",alt:"arrow-down",className:"h-4 object-contain object-center"})):null))},S=a(118),N=a(119),C=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={showCaret:!1,showAddresses:!1,showLoader:!1,city:"",addresses:[],errorMessage:""},a.debounceAddress=y()(a.getAddresses,1e3),a.searchCity=function(e){a.setState({city:e.target.value}),e.target.value.trim()?(a.setState({errorMessage:""}),a.debounceAddress()):a.clearState()},a.toggleAddresses=function(){a.setState((function(e,t){return{showAddresses:!e.showAddresses}}))},a.setCity=function(e){e&&(a.setState({city:e.cityName,showAddresses:!1}),a.getLatLong(e))},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleError",value:function(e){this.setState({errorMessage:e})}},{key:"getAddresses",value:function(){var e,t,a;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,this.setState({showLoader:!0}),r.next=4,f.a.awrap(b.a.get("https://api.teleport.org/api/cities/?search=".concat(this.state.city)));case 4:e=r.sent,t=e.data,Object(S.a)(t)||Object(N.a)(t)||!t.count?(this.setState({showAddresses:!1}),this.handleError("No matching cities found. Try searching with a valid city name!")):(a=t._embedded["city:search-results"].map((function(e){return{cityName:e.matching_full_name,cityId:e._links["city:item"].href.split("/")[5]}})),this.setState({addresses:a,showCaret:!0,showAddresses:!0,errorMessage:""})),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),this.handleError(r.t0);case 12:return r.prev=12,this.setState({showLoader:!1}),r.finish(12);case 15:case"end":return r.stop()}}),null,this,[[0,9,12,15]])}},{key:"getLatLong",value:function(e){var t,a,r,n,s,c,o,i,l,u,d,m,h;return f.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:return t="",a="",r="",n="",s=[],g.next=7,f.a.awrap(b.a.get("https://api.teleport.org/api/cities/".concat(e.cityId)));case 7:if(c=g.sent,o=c.data,Object(S.a)(o)||Object(N.a)(o)||(i=o.location.latlon,l=i.latitude,u=i.longitude,t=l,a=u,o._links["city:urban_area"]&&(r=o._links["city:urban_area"].name)),!localStorage.getItem("urban-areas")||void 0===r){g.next=19;break}if(d=JSON.parse(localStorage.getItem("urban-areas")),!Object.keys(d).includes(r)){g.next=19;break}return n=d[r],g.next=16,f.a.awrap(b.a.get("https://api.teleport.org/api/urban_areas/slug:".concat(n,"/images")));case 16:m=g.sent,h=m.data,s=Object(S.a)(h)||Object(N.a)(h)?[]:h.photos;case 19:this.context.updateState({address:e,latlong:"".concat(t,",").concat(a),urbanArea:{name:r,slug:n,photos:s}});case 20:case"end":return g.stop()}}),null,this)}},{key:"clearState",value:function(){this.setState({showCaret:!1,showAddresses:!1,showLoader:!1,addresses:[],errorMessage:""})}},{key:"render",value:function(){var e=this;return n.a.createElement(r.Fragment,null,n.a.createElement("div",{className:"flex justify-center mt-5"},n.a.createElement("div",{className:"w-full sm:w-5/6 md:w-2/3 xl:w-1/2"},n.a.createElement(k,{city:this.state.city,showCaret:this.state.showCaret,showAddresses:this.state.showAddresses,citySearch:this.searchCity,caretClicked:this.toggleAddresses}))),n.a.createElement("div",{className:"flex justify-center"},n.a.createElement("div",{className:"w-full sm:w-5/6 md:w-2/3 xl:w-1/2"},this.state.showLoader?n.a.createElement(j.a,null):this.state.showAddresses&&n.a.createElement("div",{className:"mx-10 mt-0 border-solid border-2 border-gray-400 rounded-b-xl address-list"},this.state.addresses.map((function(t,a){return n.a.createElement(E,{address:t,key:a,addressSelected:function(){return e.setCity(t)}})}))),this.state.errorMessage.length>0&&n.a.createElement(x.a,{errorMessage:this.state.errorMessage,showCloseBtn:!0,closeError:function(){e.setState({errorMessage:""})}}))))}}]),t}(r.Component);C.contextType=O.a;var A=C,I=a(42),T=a(69),L=a.n(T),M=(a(114),function(e){var t=e.iconType;return n.a.createElement("div",null,"light"===t?n.a.createElement("img",{src:"./sun.svg",alt:"Light"}):n.a.createElement("img",{src:"./moon.svg",alt:"Dark"}))}),_=function(){var e=Object(r.useContext)(w.a),t=e.theme,a=e.toggleTheme;return n.a.createElement("div",{className:"flex justify-between items-center px-5 py-5"},n.a.createElement("div",null,n.a.createElement("img",{src:"./logo.png",alt:"Logo",className:"h-12 w-12 object-contain object-center"})),n.a.createElement("div",null,n.a.createElement(L.a,{checked:"light"===t,icons:{checked:n.a.createElement(M,{iconType:"light"}),unchecked:n.a.createElement(M,{iconType:"dark"})},onChange:a})))},F=a(44),J=Object(r.lazy)((function(){return Promise.all([a.e(0),a.e(5)]).then(a.bind(null,149))})),P=Object(r.lazy)((function(){return Promise.all([a.e(0),a.e(4)]).then(a.bind(null,154))})),B=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"bg-".concat(this.context.theme," absolute top-0 right-0 bottom-0 left-0 tracking-wide")},n.a.createElement(I.b,null,n.a.createElement(_,null),n.a.createElement(O.b,null,n.a.createElement(A,null),n.a.createElement(F.a,null,n.a.createElement(r.Suspense,{fallback:n.a.createElement(j.a,{loaderText:"Loading components"})},n.a.createElement(J,null),n.a.createElement(P,null))))))}}]),t}(r.Component);B.contextType=w.a;var D=B;var z=function(){return n.a.createElement(w.b,null,n.a.createElement(i.c,null,n.a.createElement(i.a,{path:"/",exact:!0,component:D})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=n.a.createElement(o.a,{basename:"/weather-react"},n.a.createElement(z,null));c.a.render(U,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},24:function(e,t,a){"use strict";var r=a(0),n=a.n(r),s=(a(107),a(5));t.a=function(e){var t=e.loaderText,a=Object(r.useContext)(s.a).theme;return n.a.createElement("div",{className:"flex flex-col w-full justify-center items-center"},n.a.createElement("div",{className:"spinner"},n.a.createElement("div",{className:"double-bounce1"}),n.a.createElement("div",{className:"double-bounce2"})),t&&n.a.createElement("div",{className:"text-sm font-light text-".concat("light"===a?"dark":"light")},t,n.a.createElement("span",{className:"text-2xl text-fade"},"...")))}},25:function(e,t,a){"use strict";a.d(t,"a",(function(){return y})),a.d(t,"b",(function(){return w}));var r=a(45),n=a(7),s=a.n(n),c=a(33),o=a(13),i=a(14),l=a(16),u=a(15),d=a(17),m=a(0),h=a.n(m),g=a(19),f=a.n(g),p=a(8),b=a(118),v=a(119),y=h.a.createContext(null),w=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),d=0;d<n;d++)i[d]=arguments[d];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).updateState=function(e){a.setState(Object(c.a)({},e))},a.updateFavorites=function(e){a.setState(Object(c.a)({},e))},a.state={address:{cityName:"",cityId:""},urbanArea:{name:"",slug:"",photos:[]},latlong:"",favorites:[],updateState:a.updateState,updateFavorites:a.updateFavorites},a.fetchAddressInfo=function(){var e,t;return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.a.awrap(f.a.get("https://ipapi.co/json"));case 2:e=r.sent,t=e.data,Object(b.a)(t)||Object(v.a)(t)||a.updateState({address:{cityName:"".concat(t.city,", ").concat(t.region,", ").concat(t.country_name),cityId:""},latlong:"".concat(t.latitude,",").concat(t.longitude)});case 5:case"end":return r.stop()}}))},a.getFavorites=function(){localStorage.getItem("favorites")&&a.setState({favorites:Object(r.a)(JSON.parse(localStorage.getItem("favorites")))})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"getAddressInfo",value:function(){var e;return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.fetchAddressInfo(),localStorage.getItem("urban-areas")){t.next=7;break}return t.next=5,s.a.awrap(f.a.get("https://gist.githubusercontent.com/iamsainikhil/4959bbe458ebf0c4bcbf7e24b4983c89/raw/170221bcd3d9732fec97210b9a67cd445e437481/urban_areas.json").then((function(e){return e.data})));case 5:e=t.sent,localStorage.setItem("urban-areas",JSON.stringify(e));case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),null,this,[[0,9]])}},{key:"componentDidMount",value:function(){this.getAddressInfo(),this.getFavorites()}},{key:"render",value:function(){return h.a.createElement(y.Provider,{value:this.state},this.props.children)}}]),t}(m.Component);y.propTypes={address:p.PropTypes.objectOf(p.PropTypes.string),latlong:p.PropTypes.string}},27:function(e,t,a){"use strict";var r=a(0),n=a.n(r),s=a(5);t.a=function(e){var t=Object(r.useContext)(s.a).theme;return n.a.createElement("div",{className:"w-5/6 ml-auto mr-auto h-auto bg-".concat(t," border border-red-400 text-red-700 mt-5 px-4 py-2 rounded relative"),role:"alert"},n.a.createElement("span",{className:"w-5/6 block break-words"},e.errorMessage),e.showCloseBtn&&n.a.createElement("span",{className:"absolute top-0 bottom-0 right-0 ml-3 mr-1 py-3",onClick:e.closeError},n.a.createElement("svg",{className:"fill-current h-6 w-6 text-red-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},n.a.createElement("title",null,"Close"),n.a.createElement("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"}))))}},42:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return o}));var r=a(23),n=a(0),s=a.n(n),c=s.a.createContext({weatherUnit:"F"}),o=function(e){var t=e.children,a=Object(n.useState)("F"),o=Object(r.a)(a,2),i=o[0],l=o[1];return Object(n.useEffect)((function(){localStorage.getItem("unit")?l(JSON.parse(localStorage.getItem("unit"))):localStorage.setItem("unit",JSON.stringify("F"))}),[]),s.a.createElement(c.Provider,{value:{weatherUnit:i,updateWeatherUnit:function(e){l(e),localStorage.setItem("unit",JSON.stringify(e))}}},t)}},44:function(e,t,a){"use strict";var r=a(13),n=a(14),s=a(16),c=a(15),o=a(17),i=a(0),l=a.n(i),u=a(27),d=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={hasError:!1},a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return l.a.createElement("div",null,this.state.hasError?l.a.createElement(u.a,{errorMessage:"Something went wrong."}):this.props.children)}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(i.Component);t.a=d},5:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return l}));var r=a(23),n=a(0),s=a.n(n),c=a(41),o=a.n(c),i=s.a.createContext({theme:"light",toggleTheme:function(){}}),l=function(e){var t=e.children,a=Object(n.useState)("light"),c=Object(r.a)(a,2),l=c[0],u=c[1],d="light"===l?"dark":"light";return Object(n.useEffect)((function(){!function(){var e=o()().format("H");u(e>=6&&e<18?"light":"dark")}()}),[]),s.a.createElement(i.Provider,{value:{theme:l,colorTheme:d,toggleTheme:function(){u("light"===l?"dark":"light")}}},t)}},73:function(e,t,a){e.exports=a(117)},78:function(e,t,a){},79:function(e,t,a){}},[[73,2,3]]]);
//# sourceMappingURL=main.cd4a6358.chunk.js.map